(function(e,t,r){t.behaviors.gattefosse_cart={attach:function(r,i){e('#salesforce-registration-form').validate({rules:{'registration-firstname':'required','registration-name':'required','registration-company':'required','registration-city':'required','registration-country':'required','registration-market':'required','registration-fonction':'required','registration-department':'required','registration-mail':{required:!0,email:!0},'registration-rgpd':'required',},messages:{'registration-firstname':t.t('Please enter your first name'),'registration-name':t.t('Please enter your last name'),'registration-company':t.t('Please enter your company'),'registration-city':t.t('Please enter your city'),'registration-country':t.t('Please enter your country'),'registration-market':t.t('Please enter your market'),'registration-fonction':t.t('Please enter your position'),'registration-department':t.t('Please enter your department'),'registration-mail':{required:t.t('Please enter your email address'),email:t.t('Please enter a valid email address'),},'registration-rgpd':t.t('Please check the checkbox'),},errorClass:'form-item--error-message',errorElement:'p',errorPlacement:function(e,t){if(t.attr('name')==='registration-rgpd'){t.parent().append(e)}
else{e.insertAfter(t)}},invalidHandler:function(t,i){var a=e('.header',r).height();if(e('body').hasClass('user-logged-in')){a=e('.header').height()+e('#toolbar-bar').height()};if(e('body').hasClass('toolbar-tray-open')){a=e('.header').height()+e('#toolbar-bar').height()+e('#toolbar-item-administration-tray').height()+1};if(!i.numberOfInvalids())return;e('html, body').animate({scrollTop:e(i.errorList[0].element).offset().top-a-35},100)},submitHandler:function(e){e.submit()}});e('#sample-request-form').validate({rules:{'registration-firstname':'required','registration-name':'required','registration-company':'required','registration-country':'required','registration-market':'required','registration-fonction':'required','registration-department':'required','registration-mail':{required:!0,email:!0}},messages:{'registration-firstname':t.t('Please enter your first name'),'registration-name':t.t('Please enter your last name'),'registration-company':t.t('Please enter your company'),'registration-country':t.t('Please enter your country'),'registration-market':t.t('Please enter your market'),'registration-fonction':t.t('Please enter your position'),'registration-department':t.t('Please enter your department'),'registration-mail':{required:t.t('Please enter your email address'),email:t.t('Please enter a valid email address'),}},errorClass:'form-item--error-message',errorElement:'p',submitHandler:function(e){e.submit()}});e('#salesforce-registration-form').find('[name="registration-phone"]').intlTelInput({utilsScript:'https://cdn.jsdelivr.net/gh/jackocnr/intl-tel-input@16.1.0/build/js/utils.js',autoPlaceholder:!0,preferredCountries:['fr'],});e('#salesforce-registration-form').find('[name="registration-mobile"]').intlTelInput({utilsScript:'https://cdn.jsdelivr.net/gh/jackocnr/intl-tel-input@16.1.0/build/js/utils.js',autoPlaceholder:!0,preferredCountries:['fr'],});e('#sample-request-form').find('[name="registration-phone"]').intlTelInput({utilsScript:'https://cdn.jsdelivr.net/gh/jackocnr/intl-tel-input@16.1.0/build/js/utils.js',autoPlaceholder:!0,preferredCountries:['fr'],});e('#sample-request-form').find('[name="registration-mobile"]').intlTelInput({utilsScript:'https://cdn.jsdelivr.net/gh/jackocnr/intl-tel-input@16.1.0/build/js/utils.js',autoPlaceholder:!0,preferredCountries:['fr'],});setTimeout(function(){e('#sample-request-form .form-item #edit-registration-country').removeAttr('data-once');e('#sample-request-form .form-item #edit-registration-country').removeAttr('style');e('#sample-request-form .form-item #edit_registration_country_chosen').remove();e('#salesforce-registration-form .form-item #edit-registration-country').removeAttr('data-once');e('#salesforce-registration-form .form-item #edit-registration-country').removeAttr('style');e('#salesforce-registration-form .form-item #edit_registration_country_chosen').remove();e('.form-tel').each(function(){e(this).on('change',function(){var t=e(this).val();if(t!=''&&!t.includes('+')){var r=e(this).intlTelInput('getSelectedCountryData').dialCode;e(this).val('+'+r+t)}})})},10);e('.s-page .js-remove-card').once().on('click',function(){e.ajax({url:t.url('remove-card'),type:'POST',data:{'uid':e(this).attr('data-uid'),'nid':e(this).attr('data-nid'),},dataType:'json',success:function(e){location.reload()}})});e('.s-page .js-clear-cart').once().on('click',function(){e.ajax({url:t.url('clear-card'),type:'POST',data:{'uid':e(this).attr('data-uid'),},dataType:'json',success:function(e){location.reload()}})});e('.js-validate-cart').once().on('click',function(r){var i=e('#sample-request-form .form-item #edit-registration-name').val(),a=e('#sample-request-form .form-item #edit-registration-firstname').val(),o=e('#sample-request-form .form-item #edit-registration-company').val(),s=e('#sample-request-form .form-item #edit-registration-street').val(),n=e('#sample-request-form .form-item #edit-registration-zip').val(),l=e('#sample-request-form .form-item #edit-registration-city').val(),m=e('#sample-request-form .form-item #edit-registration-country').find(':selected').val(),d=e('#sample-request-form .form-item #edit-registration-state').find(':selected').val(),f=e('#sample-request-form .form-item #edit-registration-market').find(':selected').val(),c=e('#sample-request-form .form-item #edit-registration-fonction').find(':selected').val(),u=e('#sample-request-form .form-item #edit-registration-job').val(),g=e('#sample-request-form .form-item #edit-registration-department').find(':selected').val(),p=e('#sample-request-form .form-item #edit-registration-mail').val(),h=e('#sample-request-form .form-item #edit-registration-phone').val(),q=e('#sample-request-form').find('[name="registration-phone"]').intlTelInput('isValidNumber'),y=e('#sample-request-form .form-item #edit-registration-mobile').val(),b=e('#sample-request-form').find('[name="registration-mobile"]').intlTelInput('isValidNumber'),v=e('#sample-request-form .form-item #edit-registration-comment').val();if(e('#sample-request-form').valid()){r.preventDefault();e.ajax({url:t.url('validate-order'),type:'POST',data:{'uid':e(this).attr('data-uid'),'name':i,'firstname':a,'company':o,'street':s,'zip':n,'city':l,'country':m,'state':d,'market':f,'fonction':c,'job':u,'department':g,'mail':p,'phone':h,'mobile':y,'comment':v,},dataType:'json',success:function(t){if(t.error){e('#sample-request-modal .modal-message').html('<p>'+t.error[0].message+'</p>')};e('#sample-request-modal').show()}})}});e('#sample-request-modal .o-btn-close').on('click',function(){e('#registration-modal').hide();location.reload()});e('#edit-registration-country').once().on('change',function(){e.ajax({url:'/get-state-list',method:'GET',data:{'country_code':this.value,},dataType:'json',success:function(t){e('#edit-registration-state option').remove();e.each(t,function(t,r){e('#edit-registration-state').append(e('<option>',{value:t,text:r}))})}})});e('#registration .js-create-lead').once().on('click',function(r){var n=e('#salesforce-registration-form .form-item #edit-registration-firstname').val(),l=e('#salesforce-registration-form .form-item #edit-registration-name').val(),m=e('#salesforce-registration-form .form-item #edit-registration-company').val(),d=e('#salesforce-registration-form .form-item #edit-registration-street').val(),f=e('#salesforce-registration-form .form-item #edit-registration-zip').val(),c=e('#salesforce-registration-form .form-item #edit-registration-city').val(),u=e('#salesforce-registration-form .form-item #edit-registration-country').find(':selected').val(),g=e('#salesforce-registration-form .form-item #edit-registration-state').find(':selected').val(),p=e('#salesforce-registration-form .form-item #edit-registration-market').find(':selected').val(),h=e('#salesforce-registration-form .form-item #edit-registration-fonction').find(':selected').val(),y=e('#salesforce-registration-form .form-item #edit-registration-other').val(),v=e('#salesforce-registration-form .form-item #edit-registration-job').val(),q=e('#salesforce-registration-form .form-item #edit-registration-department').find(':selected').val(),b=e('#salesforce-registration-form .form-item #edit-registration-mail').val(),i=e('#salesforce-registration-form').find('[name="registration-phone"]').intlTelInput('getNumber'),o='+'+e('#salesforce-registration-form').find('[name="registration-phone"]').intlTelInput('getSelectedCountryData').dialCode,j=!0,a=e('#salesforce-registration-form').find('[name="registration-mobile"]').intlTelInput('getNumber'),s='+'+e('#salesforce-registration-form').find('[name="registration-mobile"]').intlTelInput('getSelectedCountryData').dialCode,P=!0,T=e('#salesforce-registration-form .form-item #edit-registration-language').find(':selected').val();if(i==o){i=i.replace(o,'')}
else{j=e('#salesforce-registration-form').find('[name="registration-phone"]').intlTelInput('isValidNumber')};if(a==s){a=a.replace(s,'')}
else{P=e('#salesforce-registration-form').find('[name="registration-mobile"]').intlTelInput('isValidNumber')};if(e('#salesforce-registration-form').valid()){e(this).prop('disabled',!0);r.preventDefault();e.ajax({url:t.url('create-lead'),type:'POST',data:{'firstname':n,'name':l,'company':m,'street':d,'zip':f,'city':c,'country':u,'state':g,'market':p,'position':h,'other':y,'job':v,'department':q,'mail':b,'phone':i,'mobile':a,'language':T},dataType:'json',success:function(r){if(r==='DUPLICATES_DETECTED'){e('#registration-modal .success-message').hide();e('#registration-modal .duplicate-message').show()}
else{e('#registration-modal .success-message').show();e('#registration-modal .duplicate-message').hide();if(r.error){let message=r.error[0].message??t.t('A server error has occurred.');e('#registration-modal .modal-message').html('<p>'+message+'</p>')}};e('#registration-modal').show()}})}});e('#registration-modal .o-btn-close').on('click',function(){e('#registration-modal').hide();location.reload()})}}})(jQuery,Drupal,drupalSettings);;
